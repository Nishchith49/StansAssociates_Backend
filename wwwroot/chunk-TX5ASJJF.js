import{b as S,i as O,j as y}from"./chunk-QFFBEC2S.js";import{Aa as s,Ba as c,Bb as x,Ca as f,Da as C,Ea as _,Fa as b,Ga as i,Ha as r,Ia as l,Qb as M,Sa as m,Tb as P,Ub as D,Za as v,ab as d,bb as p,ha as a,la as h,oa as u}from"./chunk-M53X7M2I.js";function E(n,t){n&1&&(i(0,"div",4),l(1,"app-loading-page"),r())}function k(n,t){if(n&1&&(i(0,"div",5),l(1,"app-error-page",7),r()),n&2){let e=m();a(),b("errorData",e.errorData)}}function w(n,t){if(n&1&&(i(0,"a",8)(1,"div",9)(2,"div",10)(3,"span",11),d(4),r()(),i(5,"div",12),d(6),r()(),i(7,"div")(8,"div",13),d(9),r(),i(10,"div",14),l(11,"div",15),r()()()),n&2){let e=t.$implicit,o=m(2);b("routerLink",e.link),a(4),p(e.icon),a(2),p(e.count),a(3),p(e.name),a(2),v("width",o.getProgress(e.count),"%")}}function L(n,t){if(n&1&&(i(0,"div",6),C(1,w,12,6,"a",8,f),r()),n&2){let e=m();a(),_(e.dashboard)}}var g=class n{constructor(t,e){this._dashboardService=t;this._authService=e}dashboard=[{name:"Total Schools",count:0,icon:"apartment",link:"/admin/schools"},{name:"Total Routes",count:0,icon:"alt_route",link:"/admin/routes"},{name:"Total Staffs",count:0,icon:"group",link:"/admin/members"},{name:"Total Students",count:0,icon:"groups",link:"/admin/students"}];isLoadingData=!0;isError=!1;errorData;ngOnInit(){this._dashboardService.apiDashboardGetDashboardGet().subscribe({next:t=>{this.isLoadingData=!1,t.statusCode===200&&t.data?(this.isError=!1,this.setDashboardCount("Total Schools",t.data.totalSchools??0),this.setDashboardCount("Total Routes",t.data.totalRoutes??0),this.setDashboardCount("Total Staffs",t.data.totalStaffs??0),this.setDashboardCount("Total Students",t.data.totalStudents??0)):(this.isError=!0,this.errorData={imgSrc:"empty-box.png",errorTitleMessage:"No Data available",errorSubTitleMessage:"Please try to refresh the page."})},error:t=>{this.isLoadingData=!1,this.isError=!0,navigator.onLine?t.status===401?this._authService.logout():this.errorData={imgSrc:"error.png",errorTitleMessage:"Something went wrong",errorSubTitleMessage:"Please try again later"}:this.errorData={imgSrc:"no-signal.png",errorTitleMessage:"Internet connection lost",errorSubTitleMessage:"Please check your connection."}}})}setDashboardCount(t,e){let o=this.dashboard.find(T=>T.name===t);o&&(o.count=e)}getProgress(t){return Math.min(t/100*100,100)}static \u0275fac=function(e){return new(e||n)(h(S),h(D))};static \u0275cmp=u({type:n,selectors:[["app-dashboard"]],decls:9,vars:3,consts:[[1,"main-container"],[1,"header"],[1,"header-left"],[1,"page-title"],["fxLayoutAlign","center center",1,"loading-page-ui"],[1,"error-page-ui"],[1,"dashboard-container"],[3,"errorData"],[1,"dashboard-card",3,"routerLink"],[1,"icon-container"],[1,"icon-top"],[1,"material-icons"],[1,"count"],[1,"label"],[1,"progress-bar-container"],[1,"progress-bar"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),d(5,"Dashboard"),r()()()(),s(6,E,2,0,"div",4),s(7,k,2,1,"div",5),s(8,L,3,0,"div",6),r()),e&2&&(a(6),c(!o.isError&&o.isLoadingData?6:-1),a(),c(o.isError&&!o.isLoadingData?7:-1),a(),c(!o.isLoadingData&&!o.isError?8:-1))},dependencies:[x,P,M,y,O],styles:[".dashboard-container[_ngcontent-%COMP%]{margin-top:20px;display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:20px}.dashboard-container[_ngcontent-%COMP%]   .dashboard-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#e3f2fd;padding:.8rem;border-radius:12px;text-decoration:none;transition:.3s;color:inherit;position:relative;border:1px solid #dbe6f3;gap:20px}.dashboard-container[_ngcontent-%COMP%]   .dashboard-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 6px 16px #0000001f}.dashboard-container[_ngcontent-%COMP%]   .dashboard-card[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:start}.dashboard-container[_ngcontent-%COMP%]   .dashboard-card[_ngcontent-%COMP%]   .icon-top[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;background-color:#fff;border-radius:50%;margin-bottom:0}.dashboard-container[_ngcontent-%COMP%]   .dashboard-card[_ngcontent-%COMP%]   .icon-top[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#1976d2;font-size:24px}.dashboard-container[_ngcontent-%COMP%]   .dashboard-card[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{font-size:45px;font-weight:700;color:#1976d2;line-height:45px}.dashboard-container[_ngcontent-%COMP%]   .dashboard-card[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:16px;color:#1976d2;margin-bottom:0}.dashboard-container[_ngcontent-%COMP%]   .dashboard-card[_ngcontent-%COMP%]   .progress-bar-container[_ngcontent-%COMP%]{width:100%;height:6px;background-color:#e0e0e0;border-radius:5px;overflow:hidden}.dashboard-container[_ngcontent-%COMP%]   .dashboard-card[_ngcontent-%COMP%]   .progress-bar-container[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:100%;background-color:#1976d2;transition:width .4s ease}"]})};var q=[{path:"",component:g}];export{q as dashboardRoutes};
