import{A as X,B as Z,b as F,d as U,e as L,f as N,g as x,h as C,i as D,k as T,n as A,p as J,q as Q,s as W,u as z,z as B}from"./chunk-7JKERNBD.js";import{f as G}from"./chunk-6526M3GP.js";import{a as V}from"./chunk-FY23YZZ2.js";import{$a as b,Ab as y,Ca as d,Da as o,Ea as i,Fa as O,La as h,Mb as $,Na as u,O as g,Ob as k,P as m,Pa as l,Pb as I,Sb as R,Za as a,_a as v,bb as H,db as S,eb as K,ha as s,la as p,oa as M,pb as Y,ta as _,u as q,wb as w,xb as E}from"./chunk-6RFHSZWE.js";var ce=["class","component"],de=()=>[10,20,30,50];function le(r,n){r&1&&(o(0,"div",14),O(1,"app-loading-page"),i())}function pe(r,n){if(r&1&&(o(0,"div",15),O(1,"app-error-page",16),i()),r&2){let e=l();s(),d("errorData",e.errorData)}}function ge(r,n){if(r&1){let e=h();o(0,"tr")(1,"td"),a(2),i(),o(3,"td"),a(4),i(),o(5,"td")(6,"button",20),u("click",function(){let c=g(e).$implicit,f=l(2);return m(f.getSessionStudentDetails(c.name))}),a(7,"Student List"),i()()()}if(r&2){let e=n.$implicit,t=n.index;s(2),v(t+1),s(2),v(e.name)}}function me(r,n){if(r&1&&(o(0,"div",17)(1,"table",18)(2,"thead")(3,"tr")(4,"th"),a(5,"Sl.No"),i(),o(6,"th"),a(7,"Session"),i(),o(8,"th"),a(9,"Actions"),i()()(),o(10,"tbody"),_(11,ge,8,2,"tr",19),i()()()),r&2){let e=l();s(11),d("ngForOf",e.sessions)}}function ue(r,n){if(r&1&&(o(0,"option",26),a(1),i()),r&2){let e=n.$implicit;d("value",e),s(),v(e)}}function fe(r,n){if(r&1){let e=h();o(0,"div",21)(1,"div",22)(2,"label"),a(3,"Items per page:"),i(),o(4,"select",23),u("change",function(c){g(e);let f=l();return m(f.onPageSizeChange(c))}),_(5,ue,2,2,"option",24),i(),o(6,"span"),a(7),i(),o(8,"button",25),u("click",function(){g(e);let c=l();return m(c.goToFirstPage())}),a(9,"\xAB"),i(),o(10,"button",25),u("click",function(){g(e);let c=l();return m(c.goToPreviousPage())}),a(11,"\u2039"),i(),o(12,"button",25),u("click",function(){g(e);let c=l();return m(c.goToNextPage())}),a(13,"\u203A"),i(),o(14,"button",25),u("click",function(){g(e);let c=l();return m(c.goToLastPage())}),a(15,"\xBB"),i()()()}if(r&2){let e=l();s(4),d("value",e.pageSize),s(),d("ngForOf",S(9,de)),s(2),H("",e.pageNumber*e.pageSize+1," - ",e.getEndItemIndex()," of ",e.totalRecords),s(),d("disabled",e.pageNumber===0),s(2),d("disabled",e.pageNumber===0),s(2),d("disabled",e.pageNumber+1>=e.totalPages),s(2),d("disabled",e.pageNumber+1>=e.totalPages)}}var j=class r{constructor(n,e,t,c,f){this._studentService=n;this._authService=e;this._router=t;this._cdr=c;this._snackBar=f}paginatorForm=new x({pageNumber:new C(0),pageSize:new C(10)});filterForm=new x({searchString:new C(null)});isLoading=!1;isLoadingData=!0;isError=!1;errorData;totalRecords=0;sessions=[];ngOnInit(){this.getRoutesData(),this.paginatorForm.valueChanges.pipe(q(500)).subscribe(n=>{this.isLoadingData=!0,this.getRoutesData()}),this.filterForm.valueChanges.pipe(q(500)).subscribe(n=>{this.isLoadingData=!0,this.getRoutesData()})}get pageNumber(){return this.paginatorForm.get("pageNumber")?.value??0}get pageSize(){return this.paginatorForm.get("pageSize")?.value??10}get totalPages(){return Math.ceil(this.totalRecords/this.pageSize)}getEndItemIndex(){let n=(this.pageNumber+1)*this.pageSize;return n>this.totalRecords?this.totalRecords:n}goToFirstPage(){this.paginatorForm.patchValue({pageNumber:0})}goToPreviousPage(){this.pageNumber>0&&this.paginatorForm.patchValue({pageNumber:this.pageNumber-1})}goToNextPage(){this.pageNumber+1<this.totalPages&&this.paginatorForm.patchValue({pageNumber:this.pageNumber+1})}goToLastPage(){this.paginatorForm.patchValue({pageNumber:this.totalPages-1})}onPageSizeChange(n){let e=parseInt(n.target.value,10);this.paginatorForm.patchValue({pageSize:e,pageNumber:0})}getRoutesData(){let n={pageIndex:this.pageNumber,pageSize:this.pageSize,searchString:this.filterForm.value.searchString||""};this.isError=!1,this.errorData=null,this.isLoadingData=!0,this._studentService.apiStudentGetSessionsPost(n).subscribe({next:e=>{this.isLoadingData=!1,e.statusCode===200&&e.data?(this.sessions=e.data,this.totalRecords=e.totalRecords??0,this._cdr.detectChanges()):(this.isError=!0,this.errorData={imgSrc:"empty-box.png",errorTitleMessage:"No Data available",errorSubTitleMessage:"Please try to add Sessions!"}),this._cdr.detectChanges()},error:e=>{this.isLoadingData=!1,this.sessions=[],navigator.onLine?e.status===401?this._authService.logout():this.setGenericError():this.errorData={imgSrc:"no-signal.png",errorTitleMessage:"Internet connection lost",errorSubTitleMessage:"Please check your connection."},this.isError=!0,this._cdr.detectChanges()}})}setGenericError(){this.errorData={imgSrc:"error.png",errorTitleMessage:"Something went wrong",errorSubTitleMessage:"Please try again later"}}resetToSearch(){this.filterForm.controls.searchString.reset()}getSessionStudentDetails(n){this._router.navigate(["/admin/students/list"],{queryParams:{session:n}})}static \u0275fac=function(e){return new(e||r)(p(G),p(V),p(k),p(Y),p(B))};static \u0275cmp=M({type:r,selectors:[["app-list",8,"component"]],attrs:ce,decls:22,vars:5,consts:[[1,"sessions-container"],[1,"header"],[1,"header-left"],[1,"page-title"],[1,"breadcrumb"],["routerLink","/admin/dashboard"],[1,"separator"],[1,"header-right",3,"formGroup"],["type","text","placeholder","Search...","formControlName","searchString",1,"search-input"],["routerLink","/admin/sessions/add",1,"add-button"],["class","loading-page-ui","fxLayoutAlign","center center",4,"ngIf"],["class","error-page-ui",4,"ngIf"],["class","table-wrapper",4,"ngIf"],["class","paginator-wrapper",4,"ngIf"],["fxLayoutAlign","center center",1,"loading-page-ui"],[1,"error-page-ui"],[3,"errorData"],[1,"table-wrapper"],[1,"session-table"],[4,"ngFor","ngForOf"],[1,"edit-button",3,"click"],[1,"paginator-wrapper"],[1,"pagination-controls"],[3,"change","value"],[3,"value",4,"ngFor","ngForOf"],[3,"click","disabled"],[3,"value"]],template:function(e,t){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),a(5,"Sessions"),i()(),o(6,"div",4)(7,"span")(8,"a",5),a(9,"Home"),i()(),o(10,"span",6),a(11,"/"),i(),o(12,"span"),a(13,"Sessions"),i()()(),o(14,"form",7),O(15,"input",8),o(16,"button",9),a(17,"Add"),i()()(),_(18,le,2,0,"div",10)(19,pe,2,1,"div",11)(20,me,12,1,"div",12)(21,fe,16,10,"div",13),i()),e&2&&(s(14),d("formGroup",t.filterForm),s(4),d("ngIf",t.isLoadingData),s(),d("ngIf",t.isError&&!t.isLoadingData),s(),d("ngIf",!t.isLoadingData&&!t.isError),s(),d("ngIf",t.totalRecords>t.pageSize))},dependencies:[R,I,y,w,E,Z,z,D,J,Q,F,L,N,T,A,X],styles:['html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;margin:0;padding:0;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background-color:#f5f5f5}.sessions-container[_ngcontent-%COMP%]{width:100%;min-height:100vh;padding:2rem;background-color:#f5f5f5;border-radius:10px;box-shadow:0 4px 12px #00000014;box-sizing:border-box}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap}.header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.8rem;color:#222}.header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{font-size:.95rem;color:#777}.header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#007bff}.header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{margin:0 6px;color:#999}.header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin-top:1rem}.header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{height:38px;padding:0 12px;border-radius:6px;border:1px solid #ccc;font-size:.95rem;min-width:220px;transition:all .2s ease}.header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 2px #007bff33}.header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{height:38px;padding:0 20px;border-radius:6px;border:none;background-color:#0056d2;color:#fff;font-size:.95rem;cursor:pointer;transition:background-color .2s ease}.header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]:hover{background-color:#0041a8}.table-wrapper[_ngcontent-%COMP%]{margin-top:2rem;overflow-x:auto}.session-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:.95rem;min-width:900px}.session-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .session-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border:1px solid #ddd;white-space:nowrap}.session-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f4f4f4;font-weight:600;color:#333}.session-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#fafafa}.session-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1f7ff}.session-table[_ngcontent-%COMP%]   .edit-button[_ngcontent-%COMP%]{margin-left:5px;padding:6px 12px;border:none;border-radius:4px;background-color:#007bff;color:#fff;font-size:.85rem;cursor:pointer;transition:background-color .2s ease}.session-table[_ngcontent-%COMP%]   .edit-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.session-table[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]{margin-left:5px;padding:6px 12px;border:none;border-radius:4px;background-color:red;color:#fff;font-size:.85rem;cursor:pointer;transition:background-color .2s ease}.session-table[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]:hover{background-color:#c00000}.paginator-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;padding:1rem 0}.paginator-wrapper[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;gap:1rem;font-size:.95rem;background-color:#f9f9f9;border:1px solid #ddd;padding:8px 12px;border-radius:8px;box-shadow:0 2px 6px #0000000d}.paginator-wrapper[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#333}.paginator-wrapper[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:6px 10px;border-radius:6px;border:1px solid #ccc;font-size:.95rem;min-width:60px;background-color:#fff;cursor:pointer;transition:border-color .2s}.paginator-wrapper[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff}.paginator-wrapper[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500;min-width:120px;text-align:center;color:#444}.paginator-wrapper[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px 10px;border-radius:6px;border:1px solid #ccc;background-color:#fff;font-weight:700;font-size:.9rem;color:#007bff;cursor:pointer;transition:all .2s}.paginator-wrapper[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#007bff;color:#fff;border-color:#007bff}.paginator-wrapper[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;color:#aaa;border-color:#ccc}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:40px;height:18px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;background-color:#a0c4ff;border-radius:34px;inset:0;transition:.3s}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:14px;width:14px;left:3px;bottom:2px;background-color:#06f;transition:.3s;border-radius:50%}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#a0c4ff}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(20px)}']})};var _e=["class","component"],Ce=()=>({name:"name",label:"Session Name"}),he=r=>[r];function be(r,n){r&1&&(o(0,"span",16),a(1,"*"),i())}function xe(r,n){if(r&1&&(o(0,"span"),a(1),i()),r&2){let e=l().$implicit;s(),b(" ",e.label," is required. ")}}function Pe(r,n){if(r&1){let e=h();o(0,"div",11)(1,"label",12),a(2),_(3,be,2,0,"span",13),i(),o(4,"input",14),u("keypress",function(c){g(e);let f=l();return m(f.onKeyPress(c))})("input",function(c){g(e);let f=l();return m(f.onInput(c))}),i(),_(5,xe,2,1,"span",15),i()}if(r&2){let e,t=n.$implicit,c=l();s(),d("for",t.name),s(),b(" ",t.label," "),s(),d("ngIf",c.isFieldRequired(t.name)),s(),d("formControlName",t.name)("id",t.name),s(),d("ngIf",((e=c.f.get(t.name))==null||e.errors==null?null:e.errors.required)&&((e=c.f.get(t.name))==null?null:e.touched))}}var P=class r{constructor(n,e,t,c,f){this._studentService=n;this._route=e;this._router=t;this._authenticationService=c;this._snackBar=f}addOrEditSessionForm=new x({name:new C(0,U.required)});get f(){return this.addOrEditSessionForm}isFieldRequired(n){let e=this.f.get(n);if(e?.validator){let t=e.validator({});return t&&t.required}return!1}currentYear=new Date().getFullYear();onKeyPress(n){["0","1","2","3","4","5","6","7","8","9"].includes(n.key)||n.preventDefault()}onInput(n){let e=n.target,t=e.value;t.length===4&&parseInt(t)>this.currentYear&&(e.value=this.currentYear.toString(),this.addOrEditSessionForm.get("name")?.setValue(this.currentYear))}isLoading=!1;sessionId;isLoadingData=!1;isError=!1;errorData;ngOnInit(){}onSubmit(){let n=this.addOrEditSessionForm.value;if(!this.sessionId)if(this.addOrEditSessionForm.valid){let e={name:n.name?.toString()??""};this.isLoading=!0,this.addOrEditSessionForm.disable(),this._studentService.apiStudentAddSessionPost(e).subscribe({next:t=>{this.isLoading=!1,this.addOrEditSessionForm.enable(),localStorage.removeItem("userData"),t.statusCode===200?(this._router.navigateByUrl("/admin/sessions/list"),this._snackBar.open(t.message??"Session created successfully","Close",{duration:3e3,panelClass:["snack-success"]})):this._snackBar.open(t.message??"Something went wrong, Please try after sometime","Close",{duration:3e3,panelClass:["snack-error"]})},error:t=>{this.isLoading=!1,this.addOrEditSessionForm.enable(),navigator.onLine?this._snackBar.open("Something went wrong, Please try after sometime","Close",{duration:3e3,panelClass:["snack-error"]}):t.status==401?this._authenticationService.logout():this._snackBar.open("Internet Connection Lost, Please check your connectivity","Close",{duration:3e3,panelClass:["snack-error"]})}})}else{this._snackBar.open("Please enter session details","Close",{duration:3e3,panelClass:["snack-error"]}),this.addOrEditSessionForm.markAllAsTouched();return}}static \u0275fac=function(e){return new(e||r)(p(G),p($),p(k),p(V),p(B))};static \u0275cmp=M({type:r,selectors:[["app-add-or-edit",8,"component"]],attrs:_e,decls:23,vars:7,consts:[[1,"session-form"],[1,"title"],[1,"breadcrumb"],["routerLink","/admin/dashboard"],["routerLink","/admin/sessions/list"],[1,"form"],[3,"ngSubmit","formGroup"],[1,"group"],["class","form-group",4,"ngFor","ngForOf"],[1,"form-actions"],["type","submit"],[1,"form-group"],[3,"for"],["class","text-warn",4,"ngIf"],["type","text","maxlength","4",1,"form-control",3,"keypress","input","formControlName","id"],[4,"ngIf"],[1,"text-warn"]],template:function(e,t){e&1&&(o(0,"div",0)(1,"h2",1),a(2),i(),o(3,"div",2)(4,"span")(5,"a",3),a(6,"Home"),i()(),o(7,"span"),a(8,"/"),i(),o(9,"span")(10,"a",4),a(11,"Sessions"),i()(),o(12,"span"),a(13,"/"),i(),o(14,"span"),a(15),i()(),o(16,"div",5)(17,"form",6),u("ngSubmit",function(){return t.onSubmit()}),o(18,"div",7),_(19,Pe,6,6,"div",8),i(),o(20,"div",9)(21,"button",10),a(22,"Submit"),i()()()()()),e&2&&(s(2),b("",t.sessionId?"Edit":"Add"," Sessions"),s(13),b("",t.sessionId?"Edit":"Add"," Session"),s(2),d("formGroup",t.addOrEditSessionForm),s(2),d("ngForOf",K(5,he,S(4,Ce))))},dependencies:[R,I,z,D,F,L,N,W,T,A,y,w,E],styles:[".session-form[_ngcontent-%COMP%]{padding:2rem;background:#f5f5f5;border-radius:8px;box-shadow:0 2px 10px #0000001a;box-sizing:border-box}.session-form[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-top:0;font-size:2rem;margin-bottom:10px;color:#333}@media (max-width: 767px){.session-form[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem}}.session-form[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{font-size:.95rem;color:#666;margin-bottom:20px}.session-form[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;text-decoration:none}.session-form[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.session-form[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 5px;color:#999}.session-form[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]{display:flex}.session-form[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px;margin-right:30px;width:100%}.session-form[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;margin-bottom:5px;font-weight:500;color:#333}.session-form[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .text-warn[_ngcontent-%COMP%]{color:red;margin-left:4px}.session-form[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px 10px;font-size:.95rem;border-radius:4px;box-sizing:border-box;border:1px solid #ccc;transition:border-color .2s ease-in-out}.session-form[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff}.session-form[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;margin-top:5px;font-size:.85rem;color:red}.session-form[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{text-align:right;margin-top:10px}.session-form[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 14px;font-size:.95rem;border-radius:4px;border:none;background-color:#007bff;color:#fff;cursor:pointer;transition:background-color .2s ease}.session-form[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})};var ze=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:j},{path:"add",component:P},{path:"edit",component:P}];export{ze as sessionsRoutes};
