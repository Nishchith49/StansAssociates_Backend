import{a as $}from"./chunk-3MR72FGO.js";import{A as Y,B as Z,b as z,d as g,e as D,f as j,g as B,h as b,i as q,k as U,n as G,u as V,z as W}from"./chunk-7JKERNBD.js";import{a as J}from"./chunk-6526M3GP.js";import{a as K}from"./chunk-TFA3KAK2.js";import"./chunk-XZ2RQNFV.js";import{a as u}from"./chunk-FY23YZZ2.js";import{$a as w,Ab as O,Ca as s,Cb as A,Da as i,Ea as r,Fa as m,H as x,Hb as F,Ib as R,Jb as E,K as I,M as S,Mb as L,Na as P,Nb as T,Ob as H,Pa as C,Rb as N,W as M,Za as p,ha as a,kb as y,la as c,oa as d,ta as l,xb as k}from"./chunk-6RFHSZWE.js";function ot(e,n){e&1&&(i(0,"span"),p(1,"Email is required."),r())}function it(e,n){e&1&&(i(0,"span"),p(1,"Please enter a valid email address."),r())}function rt(e,n){if(e&1&&(i(0,"div",13),l(1,ot,2,0,"span",14)(2,it,2,0,"span",14),r()),e&2){let t=C();a(),s("ngIf",t.signInForm.controls.emailId.errors==null?null:t.signInForm.controls.emailId.errors.required),a(),s("ngIf",t.signInForm.controls.emailId.errors==null?null:t.signInForm.controls.emailId.errors.email)}}function at(e,n){e&1&&(i(0,"span"),p(1,"Password is required."),r())}function st(e,n){if(e&1&&(i(0,"div",13),l(1,at,2,0,"span",14),r()),e&2){let t=C();a(),s("ngIf",t.signInForm.controls.password.errors==null?null:t.signInForm.controls.password.errors.required)}}function pt(e,n){e&1&&m(0,"span",15)}var f=class e{constructor(n,t,o,_,ct){this._route=n;this._authenticationService=t;this._router=o;this._accountsService=_;this._snackBar=ct}signInForm=new B({emailId:new b(null,[g.required,g.email]),password:new b(null,[g.required])});isLoading=!1;userDate;returnUrl;ngOnInit(){let n=this._route.snapshot.queryParams.returnUrl;n&&(this.returnUrl=window.atob(n)),this._authenticationService._loginListener.subscribe(t=>{t&&this._authenticationService.isSuperAdminLogin&&this._router.navigateByUrl(this.returnUrl||"/admin/dashboard")}),this._authenticationService.handleUserAuthentication()}onSubmit(){if(this.signInForm.invalid){this.signInForm.markAllAsTouched();return}this.isLoading=!0,this.signInForm.disable();let n={email:this.signInForm.controls.emailId.value?.trim(),password:this.signInForm.controls.password.value?.trim(),roleId:1};this._accountsService.apiAccountsLoginPost(n).subscribe({next:t=>{this.isLoading=!1,this.signInForm.enable(),t.statusCode===200?(t.data?.accessToken&&localStorage.setItem("token",t.data.accessToken),localStorage.removeItem("userData"),this._snackBar.open(t.message??"Logged in successfully","Close",{duration:3e3,panelClass:["snack-success"]}),this._router.navigate(["/admin/dashboard"])):this._snackBar.open(t.message??"Login failed","Close",{duration:3e3,panelClass:["snack-error"]})},error:t=>{this.isLoading=!1,this.signInForm.enable();let o=navigator.onLine?"Something went wrong. Please try again later.":"Internet Connection Lost. Please check your connectivity.";this._snackBar.open(o,"Close",{duration:4e3,panelClass:["snack-error"]})}})}static \u0275fac=function(t){return new(t||e)(c(L),c(u),c(H),c(J),c(W))};static \u0275cmp=d({type:e,selectors:[["app-sign-in"]],decls:19,vars:6,consts:[[1,"container"],[1,"right-section"],[1,"form-container"],[1,"subtitle"],[1,"title"],[3,"ngSubmit","formGroup"],["for","email"],["type","email","id","email","formControlName","emailId","placeholder","Enter your email"],["class","error",4,"ngIf"],["for","password"],["type","password","id","password","formControlName","password","placeholder","Enter your password"],["type","submit",1,"submit",3,"disabled"],["class","spinner",4,"ngIf"],[1,"error"],[4,"ngIf"],[1,"spinner"]],template:function(t,o){t&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"p",3),p(4,"Sign In"),r(),i(5,"h1",4),p(6,"St. Anthony's Associates"),r(),i(7,"form",5),P("ngSubmit",function(){return o.onSubmit()}),i(8,"label",6),p(9,"Your Email Address"),r(),m(10,"input",7),l(11,rt,3,2,"div",8),i(12,"label",9),p(13,"Password"),r(),m(14,"input",10),l(15,st,2,1,"div",8),i(16,"button",11),p(17),l(18,pt,1,0,"span",12),r()()()()()),t&2&&(a(7),s("formGroup",o.signInForm),a(4),s("ngIf",o.signInForm.controls.emailId.touched&&o.signInForm.controls.emailId.invalid),a(4),s("ngIf",o.signInForm.controls.password.touched&&o.signInForm.controls.password.invalid),a(),s("disabled",o.isLoading),a(),w(" ",o.isLoading?"Please wait...":"Sign in"," "),a(),s("ngIf",o.isLoading))},dependencies:[O,k,V,q,z,D,j,U,G],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;margin:0;padding:0;background-color:#f5f5f5}.container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background-color:#eef5f9}.right-section[_ngcontent-%COMP%]{width:100%;max-width:440px;background-color:#fff;border-radius:8px;padding:40px 30px;box-shadow:0 4px 12px #00000014}.form-container[_ngcontent-%COMP%]{width:100%}.subtitle[_ngcontent-%COMP%]{color:#5c4ac7;font-weight:500;font-size:15px;margin-bottom:0;text-align:center}.title[_ngcontent-%COMP%]{font-size:22px;font-weight:600;margin-top:4px;margin-bottom:24px;text-align:center;color:#455a64}label[_ngcontent-%COMP%]{font-size:14px;color:#666;display:block;margin-bottom:4px;margin-top:12px}input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{width:100%;padding:12px;background:#f1f6ff;border:1px solid #dbe6f3;border-radius:4px;font-size:14px;margin-bottom:6px}.error[_ngcontent-%COMP%]{color:red;font-size:12px;margin-top:-6px;margin-bottom:8px}.row-options[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin:12px 0 20px}.row-options[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{font-size:13px;color:#444}.row-options[_ngcontent-%COMP%]   .forgot-link[_ngcontent-%COMP%]{font-size:13px;color:#2979ff;text-decoration:none}.row-options[_ngcontent-%COMP%]   .forgot-link[_ngcontent-%COMP%]:hover{text-decoration:underline}button[_ngcontent-%COMP%]{width:100%;padding:12px;background-color:#5c4dc5;color:#fff;font-size:15px;font-weight:500;border:none;border-radius:6px;cursor:pointer;box-shadow:0 2px 4px #5c4dc533;transition:background .3s ease}button[_ngcontent-%COMP%]:hover{background-color:#493cb3}button[_ngcontent-%COMP%]:disabled{background-color:gray;cursor:not-allowed}.spinner[_ngcontent-%COMP%]{display:inline-block;width:16px;height:16px;border:2px solid white;border-top:2px solid transparent;border-radius:50%;animation:_ngcontent-%COMP%_spin .6s linear infinite;margin-left:8px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.back-link[_ngcontent-%COMP%]{margin-top:30px;text-align:center}.back-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:14px;text-decoration:none;color:#1976d2}.back-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{margin-right:5px}.back-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.submit[_ngcontent-%COMP%]{margin-top:20px}"]})};var X=[{path:"",redirectTo:"sign-in",pathMatch:"full"},{path:"sign-in",component:f},{path:"admin",loadChildren:()=>import("./chunk-XFOWLXZ5.js").then(e=>e.AdminRoutes)},{path:"error",component:Y},{path:"loading",component:Z},{path:"upload-image",component:$},{path:"warning",component:K},{path:"**",redirectTo:"sign-in"}];var h=class e{constructor(n){this._authenticationService=n}intercept(n,t){let o=this._authenticationService.getToken();if(o){let _=n.clone({setHeaders:{Authorization:`Bearer ${o}`}});return t.handle(_)}return t.handle(n)}static \u0275fac=function(t){return new(t||e)(I(u))};static \u0275prov=x({token:e,factory:e.\u0275fac})};var tt={providers:[M(),y({eventCoalescing:!0}),N(X),R(),S(E),{provide:F,useClass:h,multi:!0}]};var v=class e{title="stansAssociatesFrontend";static \u0275fac=function(t){return new(t||e)};static \u0275cmp=d({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(t,o){t&1&&m(0,"router-outlet")},dependencies:[T],encapsulation:2})};A(v,tt).catch(e=>console.error(e));
